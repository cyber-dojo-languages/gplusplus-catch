# >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
# DO NOT EDIT THIS FILE. IT IS AUTO_GENERATED
# >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
FROM cyberdojofoundation/gplusplus

# >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
# START of extra commands to fulfil runner's requirements (os=Debian)
RUN (getent group sandbox) || (addgroup --gid 51966 sandbox)
RUN (grep -q sandbox:x:41966 /etc/passwd) || (adduser --disabled-password --gecos "" --home /home/sandbox --ingroup sandbox --shell /bin/bash --uid 41966 sandbox)
RUN apt-get update && apt-get install --yes coreutils bash tar file
# END of extra commands to fulfil runner's requirements
# >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

LABEL maintainer=jon@jaggersoft.com

COPY catch_main.cpp /usr/src

RUN mkdir /usr/include/catch2 \
  && cd /usr/include/catch2 \
  && curl \
       --remote-header-name  `# -J Use the header-provided filename` \
       --location            `# -L Follow redirects` \
       --remote-name         `# -O Write output to a file named as the remote file` \
         https://github.com/catchorg/Catch2/releases/download/v2.9.1/catch.hpp \
  && cd /usr/src \
  && g++ -std=c++11 -Wall -c catch_main.cpp \
  && mv /usr/src/catch_main.o /usr/lib

COPY red_amber_green.rb /usr/local/bin
